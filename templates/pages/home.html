{% extends 'base.html' %}

{% block content %}
Welcome to QuarinTweet!

<div id="tweets">
    Replace
</div>


<script>
   const tweetsEl = document.getElementById("tweets")
   tweetsEl.innerHTML = 'Loading...'
   
   var el1 = ""
   const xhr = new XMLHttpRequest()
   const method = 'GET' // "POST"
   const url = "/tweets"
   const responseType = "json"
   
   
   //get the json data
   xhr.responseType = responseType
   //open request
   xhr.open(method, url)
   //when loaded log response
   xhr.onload = function() {
       const serverResponse = xhr.response
       const listedItems = serverResponse.response
       var tweetStr = "" 
       var i;
       for (i=0; i < listedItems.length; i++){
           console.log(i)
           console.log(listedItems[i])
           var currentItem = "<h1>" + listedItems[i].id + "</h1>" + "<p>" + listedItems[i].content + "</p>"
                tweetStr += currentItem
       }   
       tweetsEl.innerHTML = tweetStr
    }

   xhr.send()
</script>


{% endblock content %}